<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bus Details - CTMS</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>

<div class="container" style="margin-top: 50px;">
    <h2 class="text-center">College Transport Management System</h2>
    <h4 class="text-center text-primary">Select Your Boarding Point</h4>
    <hr>
    
    <div class="row">
        <div class="col-md-4 col-md-offset-4">
            <select id="boardingSelect" class="form-control">
                <option value="">-- Loading Locations... --</option>
            </select>
        </div>
    </div>

    <div id="busInfo" class="row" style="margin-top: 30px; display: none;">
        <div class="col-md-12">
            <div class="panel panel-primary">
                <div class="panel-heading">Bus Schedule & Details</div>
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead>
                            <tr class="bg-info">
                                <th>Bus No</th>
                                <th>Timing</th>
                                <th>Driver Name</th>
                                <th>Faculty In-Charge</th>
                                <th>Live Tracking</th>
                            </tr>
                        </thead>
                        <tbody id="busData"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="js/xlsx.full.min.js"></script>
<script src="js/jquery-2.2.4.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script>
$(document).ready(function() {
    // 1. Data List(This is your built-in database so the dropdown works without a server)
    var busDataList = [
        { Boarding_Point: "Anna Nagar", Bus_No: "B-101", Timing: "07:15 AM", Driver_Name: "Mr. Rajesh", Faculty_In_Charge: "Ms. Lakshmi", Tracking_Link: "https://www.google.com/maps/search/Anna+Nagar+Chennai" },
        { Boarding_Point: "Avadi", Bus_No: "B-205", Timing: "07:30 AM", Driver_Name: "Mr. Suresh", Faculty_In_Charge: "Mr. Kumar", Tracking_Link: "https://www.google.com/maps/search/Avadi+Chennai" },
        { Boarding_Point: "T. Nagar", Bus_No: "B-310", Timing: "07:00 AM", Driver_Name: "Mr. Mani", Faculty_In_Charge: "Dr. Priya", Tracking_Link: "https://www.google.com/maps/search/T+Nagar+Chennai" }
    ];

    // 2. Populate Dropdown
    var dropdown = $('#boardingSelect');
    busDataList.forEach(function(item) {
        dropdown.append($('<option></option>').val(item.Boarding_Point).html(item.Boarding_Point));
    });

    // 3. Handle Selection( Show the table when a user picks a location)
    dropdown.on('change', function() {
        var selectedValue = $(this).val();
        var match = busDataList.find(function(bus) {
            return bus.Boarding_Point === selectedValue;
        });

        if (match) {
            // Updated Table with Icons
            $('#busData').html(`
                <tr>
                    <td>${match.Bus_No}</td>
                    <td>${match.Timing}</td>
                    <td>${match.Driver_Name}</td>
                    <td>${match.Faculty_In_Charge}</td>
                    <td class="text-center">
                        <a href="tel:1234567890" class="btn btn-xs btn-info" title="Call"><span class="glyphicon glyphicon-earphone"></span></a>
                        <a href="sms:1234567890" class="btn btn-xs btn-warning" title="Message"><span class="glyphicon glyphicon-envelope"></span></a>
                        <a href="${match.Tracking_Link}" class="btn btn-xs btn-success" target="_blank">Track Now</a>
                    </td>
                </tr>
            `);
            $('#busInfo').fadeIn();
        } else {
            $('#busInfo').hide();
        }
    });
});
    </script>
   
</body>
</html>